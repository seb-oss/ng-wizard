"use strict";(self.webpackChunkseb_ng_wizard_lazy_demo=self.webpackChunkseb_ng_wizard_lazy_demo||[]).push([[103],{103:(_,l,s)=>{s.r(l),s.d(l,{SubStepsModule:()=>I});var h=s(6895),r=s(4006),d=s(5871),b=s(1948),S=s(591),C=s(1086),f=s(2198),v=s(7545),x=s(4850),T=s(2313),t=s(5062),c=s(2561);let y=(()=>{class e{constructor(o,n){this.wizardSteps=o,this.router=n,this.steps$=new S.X({})}saveState(o,n){this.steps$.next({...this.steps$.getValue(),[this.wizardSteps.activeStep.id]:{data:n,state:o,id:this.wizardSteps.activeStep.id}}),this.wizardSteps.setState(o)}getRoute(o,n){return this.wizardSteps.steps$.pipe((0,f.h)(a=>Object.values(a).length>0),(0,v.w)(a=>this.wizardSteps.getPreviousStep(n).pipe((0,x.U)(p=>"success"===p.data.state||"info"===p.data.state||this.router.parseUrl(`/form-and-route-guard/${Object.values(a).reduce((i,u)=>u.data.state&&u.data.number>i.data.number?u:i,Object.values(a).find(i=>1===i.data.number)).path}`)))))}getState(){return this.wizardSteps.steps$.pipe((0,f.h)(o=>Object.values(o).length>0),(0,T.c)((0,C.of)(this.steps$.getValue()[this.wizardSteps.activeStep.id])))}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(d.V9),t.LFG(c.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var g=s(3536);function Z(e,m){if(1&e&&(t.TgZ(0,"div",10),t._UZ(1,"input",11),t.TgZ(2,"label",12),t._uU(3),t.qZA()()),2&e){const o=m.$implicit;t.xp6(1),t.Q6J("formControlName",o.path),t.uIk("id","checkbox_"+(null==o.data?null:o.data.heading)),t.xp6(1),t.Q6J("for","checkbox_"+(null==o.data?null:o.data.heading)),t.xp6(1),t.Oqu(null==o.data?null:o.data.heading)}}function w(e,m){if(1&e){const o=t.EpF();t.TgZ(0,"form",7),t.NdJ("ngSubmit",function(){const p=t.CHM(o).$implicit,i=t.oxw();return t.KtG(i.toggleSubSteps(p.form.value,"/sub-steps/"+p.path))}),t.TgZ(1,"h4"),t._uU(2),t.qZA(),t.YNc(3,Z,4,4,"div",8),t.TgZ(4,"button",9),t._uU(5,"Update sub steps"),t.qZA()()}if(2&e){const o=m.$implicit;t.Q6J("formGroup",o.form),t.xp6(2),t.hij("Sub-steps for ",o.heading,""),t.xp6(1),t.Q6J("ngForOf",o.subSteps)}}const U=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-sub-steps"]],decls:3,vars:0,consts:[[1,"wizard-main","col-12","col-lg","order-1","order-md-0","mr-lg-3"]],template:function(n,a){1&n&&(t.TgZ(0,"wiz-wizard")(1,"div",0),t._UZ(2,"router-outlet"),t.qZA()())},dependencies:[c.lC,d.Pl],encapsulation:2})}return e})(),children:[{path:"",redirectTo:"introduction",pathMatch:"full"},{path:"introduction",component:(()=>{class e{constructor(o,n,a){this.wizardSteps=o,this.route=n,this._fb=a,this.routeConfiguration="// sub-steps-routing.module.ts\nconst routes: WizardStep[] = [\n  {\n    path: '',\n    component: SubStepsComponent,\n    children: [\n      { path: '', redirectTo: 'introduction', pathMatch: 'full' },\n      {\n        path: 'introduction',\n        component: IntroductionComponent,\n        data: {\n          heading: 'Introduction',\n          pageHeading: 'Wizard with optional sub-steps',\n        },\n      },\n      {\n        path: 'step-2',\n        component: SecondStepComponent,\n        data: {\n          heading: 'Second step',\n          subSteps: ['foo', 'bar']\n        },\n        children: [{\n          path: '',\n          component: SecondIndexComponent\n        },\n          {\n            path: 'foo',\n            data: {\n              heading: 'Foo step',\n            },\n            component: FooComponent\n          },\n          {\n            path: 'bar',\n            data: {\n              heading: 'Bar step',\n            },\n            component: BarComponent\n          }]\n      },\n      {\n        path: 'step-3',\n        component: ThirdStepComponent,\n        children: [{\n          path: '',\n          component: ThirdIndexComponent\n        },\n          {\n            path: 'lorem',\n            data: {\n              heading: 'Lorem step',\n            },\n            component: LoremComponent\n          },\n          {\n            path: 'ipsum',\n            data: {\n              heading: 'Ipsum step',\n            },\n            component: IpsumComponent\n          }],\n        data: {\n          heading: 'Third step',\n          subSteps: [],\n        },\n      },\n      { path: '**', pathMatch: 'full', redirectTo: 'introduction' },\n    ],\n  },\n];",this.updateSubSteps="// active sub-step with route path 'foo' for step with path '/sub-steps/step-2'\nthis.wizardSteps.updateSubSteps(['foo'], '/sub-steps/step-2');",this.steps=Object.values(this.route.parent.routeConfig.children).filter(p=>p.children).map(p=>({form:this._fb.group(p.children.filter(i=>i.path.length>0).reduce((i,u)=>({...i,[u.path]:[-1!==p.data.subSteps.indexOf(u.path)]}),{})),subSteps:p.children.filter(i=>i.path.length>0),path:p.path,heading:p.data.heading}))}toggleSubSteps(o,n){const a=Object.keys(o).filter(p=>o[p]);this.wizardSteps.updateSubSteps(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(d.V9),t.Y36(c.gz),t.Y36(r.QS))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-introduction"]],decls:39,vars:9,consts:[[1,"lead"],[1,"overflow-auto","d-flex","mx-n3","mx-sm-0","mb-3"],["markdown","",3,"data"],["class","mb-3",3,"formGroup","ngSubmit",4,"ngFor","ngForOf"],["href","https://github.com/sebgroup/ng-wizard/tree/master/projects/seb-ng-wizard-lazy-demo/src/app/sub-steps","target","_parent",1,"external"],["href","https://github.com/sebgroup/ng-wizard/tree/master/projects/seb-ng-wizard-lazy-demo/src/app/form-and-route-guard","target","_parent",1,"external"],["href","https://sebgroup.github.io/ng-wizard/master/form-and-route-guard/account-details","target","_parent",1,"external"],[1,"mb-3",3,"formGroup","ngSubmit"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-outline-primary","my-3"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"formControlName"],[1,"custom-control-label",3,"for"]],template:function(n,a){1&n&&(t.TgZ(0,"p",0),t._uU(1," Wizards are meant to guide users through a process or flow that can be divided into steps. Ideally steps are predefined and clear, but sometimes they will need to change and adapt based on user input. Optional sub-steps can be used to cater for this.\n"),t.qZA(),t.TgZ(2,"p"),t._uU(3," Sub-steps are setup as child routes to the step that should have the ability to display them. Define which subs steps should be active by default by adding their path to "),t.TgZ(4,"code"),t._uU(5,"subSteps"),t.qZA(),t._uU(6," array defined on step data. Eg.\n"),t.qZA(),t.TgZ(7,"div",1),t._UZ(8,"div",2),t.ALo(9,"language"),t.qZA(),t.TgZ(10,"p"),t._uU(11," In order to use child routes, you also need to add a router outlet to the step component containing sub steps. Create an index component that you can use as base component for the step i.e the component to load as parent step to sub steps.\n"),t.qZA(),t.TgZ(12,"p"),t._uU(13,"Toggle active sub steps in this example using the forms below."),t.qZA(),t.YNc(14,w,6,3,"form",3),t.TgZ(15,"p"),t._uU(16," The form uses "),t.TgZ(17,"code"),t._uU(18,"updateSubSteps"),t.qZA(),t._uU(19," function provided by the "),t.TgZ(20,"code"),t._uU(21,"wizardSteps"),t.qZA(),t._uU(22," service. If no step path is provided the path of the active step will be used.\n"),t.qZA(),t.TgZ(23,"div",1),t._UZ(24,"div",2),t.ALo(25,"language"),t.qZA(),t.TgZ(26,"p"),t._uU(27," The complete code with comments for this example can be found "),t.TgZ(28,"a",4),t._uU(29,"in github"),t.qZA(),t._uU(30,".\n"),t.qZA(),t.TgZ(31,"p"),t._uU(32," Another example that uses sub-steps can be found here "),t.TgZ(33,"a",5),t._uU(34,"in github"),t.qZA(),t._uU(35," and you can view it in action "),t.TgZ(36,"a",6),t._uU(37,"here"),t.qZA(),t._uU(38," (select ISK on account details step).\n"),t.qZA()),2&n&&(t.xp6(8),t.Q6J("data",t.xi3(9,3,a.routeConfiguration,"typescript")),t.xp6(6),t.Q6J("ngForOf",a.steps),t.xp6(10),t.Q6J("data",t.xi3(25,6,a.updateSubSteps,"typescript")))},dependencies:[h.sg,r._Y,r.Wl,r.JJ,r.JL,r.sg,r.u,g.lF,g.Ay],encapsulation:2})}return e})(),data:{heading:"Introduction",pageHeading:"Wizard with optional sub-steps"}},{path:"step-2",component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,a){1&n&&t._UZ(0,"router-outlet")},dependencies:[c.lC],encapsulation:2})}return e})(),data:{heading:"Second step",subSteps:["foo","bar"]},children:[{path:"",component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,a){1&n&&t._uU(0," Index component ")},encapsulation:2})}return e})()},{path:"foo",data:{heading:"Foo step"},component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,a){1&n&&t._uU(0," Foo component ")},encapsulation:2})}return e})()},{path:"bar",data:{heading:"Bar step"},component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,a){1&n&&t._uU(0," Bar component ")},encapsulation:2})}return e})()}]},{path:"step-3",component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,a){1&n&&t._uU(0," Third step component ")},encapsulation:2})}return e})(),children:[{path:"",component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,a){1&n&&t._uU(0," Index component ")},encapsulation:2})}return e})()},{path:"lorem",data:{heading:"Lorem step"},component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,a){1&n&&t._uU(0," Lorem component ")},encapsulation:2})}return e})()},{path:"ipsum",data:{heading:"Ipsum step"},component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,a){1&n&&t._uU(0," Ipsum component ")},encapsulation:2})}return e})()}],data:{heading:"Third step",subSteps:[]}},{path:"**",pathMatch:"full",redirectTo:"introduction"}]}];let z=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(U),c.Bz]})}return e})(),I=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[d.V9,y],imports:[h.ez,z,r.UX,d.EZ.forRoot(),b.m]})}return e})()}}]);